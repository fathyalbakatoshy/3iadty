# ๐ฅ ุนูุงุฏุงุชูุง - ููุตุฉ ุงูุนูุงุฏุงุช ุงูุทุจูุฉ

ููุตุฉ ุนูุงุฏุงุชูุง ุงูุทุจูุฉ - ููู ุญูุงุฏุฉุ ุงูุจุญูุฑุฉุ ูุตุฑ  
Backend API ููุชูุจ ุจู Node.js ู Express.js ู MongoDB ูุน Real-time Audit Logging

## ๐ ุงููููุฒุงุช

### ๐ฅ **ููููุทูุฉ ุงููุตุฑูุฉ - ุงูุจุญูุฑุฉ**
- **๐ ุชุฑููุฒ ูุญูู**: ููู ุญูุงุฏุฉ ูุงููุฏู ุงููุฌุงูุฑุฉ ูู ุงูุจุญูุฑุฉ
- **๐ช๐ฌ ูุตูุต ูุตุฑูุฉ**: ุฌููุน ุงูุฑุณุงุฆู ุจุงูููุฌุฉ ุงููุตุฑูุฉ
- **๐ฅ ุชูุณุน ุฏููุงูููู**: ุฅุถุงูุฉ ุฃุทุจุงุก ูุนูุงุฏุงุช ุญุณุจ ุงูููู
- **๐ฑ ุฃุฑูุงู ูุตุฑูุฉ**: ุฏุนู ุฃุฑูุงู ุงูููุจุงูู ุงููุตุฑูุฉ

### ๐ **ุงูุฃูุงู ูุงููุฑุงูุจุฉ**
- **๐ด ูุฑุงูุจุฉ ูุจุงุดุฑุฉ**: Real-time Audit Logging
- **โก ุฅุดุนุงุฑุงุช ููุฑูุฉ**: WebSocket ููุฃุญุฏุงุซ ุงููููุฉ
- **๐ก๏ธ ุชุชุจุน ุฃููู**: ูุฑุงูุจุฉ ุฌููุน ุงูุนูููุงุช ูุงูุชุบููุฑุงุช
- **๐ ุฅุญุตุงุฆูุงุช ูุจุงุดุฑุฉ**: dashboard ูููุฏูุฑูู

### ๐ฅ **ุงููุธุงุฆู ุงูุทุจูุฉ**
- **๐ฅ ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ**: ูุฏูุฑุ ุทุจูุจุ ุงุณุชูุจุงูุ ูุฑูุถุ ุฒุงุฆุฑ
- **๐ฅ ุฅุฏุงุฑุฉ ุงูุนูุงุฏุงุช**: ุนูุงุฏุงุช ูุชุนุฏุฏุฉ ูุน ุฑุจุท ุงูุฃุทุจุงุก
- **๐ ูุธุงู ุญุฌุฒ ุงูููุงุนูุฏ**: ูููุฑุถู ุงููุณุฌููู ูุงูุฒูุงุฑ
- **๐ ุงูุณุฌูุงุช ุงูุทุจูุฉ**: ุฑูุน ูุฅุฏุงุฑุฉ ุงููููุงุช ุงูุทุจูุฉ
- **โญ ูุธุงู ุงูุชููููุงุช**: ุชูููู ุงูุฃุทุจุงุก ูุงูุนูุงุฏุงุช
- **๐ ุงูุจุญุซ ุงูุฌุบุฑุงูู**: ุงูุจุญุซ ุนู ุฃุทุจุงุก ูุฑูุจูู ูู ุงูุจุญูุฑุฉ

## ๐๏ธ ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

- **Node.js** - ููุตุฉ ุชุดุบูู JavaScript
- **Express.js** - ุฅุทุงุฑ ุนูู ุงูููุจ
- **MongoDB** - ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **Mongoose** - ODM ูู MongoDB
- **JWT** - ุงููุตุงุฏูุฉ
- **bcryptjs** - ุชุดููุฑ ูููุงุช ุงููุฑูุฑ
- **Multer** - ุฑูุน ุงููููุงุช
- **Morgan** - ุณุฌูุงุช HTTP
- **Helmet** - ุฃูุงู Express
- **CORS** - ูุดุงุฑูุฉ ุงูููุงุฑุฏ

## ๐ ูููู ุงููุดุฑูุน

```
3ayadty-backend/
โโโ src/
โ   โโโ config/          # ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูุซูุงุจุช
โ   โโโ controllers/     # ุงููุชุญููุงุช
โ   โโโ middlewares/     # ุงููุณุทุงุก
โ   โโโ models/          # ููุงุฐุฌ ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โโโ routes/          # ุงููุณุงุฑุงุช
โ   โโโ services/        # ุงูุฎุฏูุงุช
โ   โโโ utils/           # ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ
โ   โโโ validators/      # ุงูุชุญูู ูู ุงูุจูุงูุงุช
โ   โโโ app.js          # ููู ุงูุชุทุจูู ุงูุฑุฆูุณู
โโโ uploads/            # ูุฌูุฏ ุงููููุงุช ุงููุฑููุนุฉ
โโโ .env.example        # ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงููููุฐุฌูุฉ
โโโ package.json        # ุชุจุนูุงุช Node.js
โโโ README.md          # ูุฐุง ุงูููู
```

## ๐ ุงูุจุฏุก ุงูุณุฑูุน

### ุงููุชุทูุจุงุช

- Node.js (>= 16.0.0)
- MongoDB (ูุญูู ุฃู Atlas)
- npm ุฃู yarn

### ุงูุชุซุจูุช

1. **ุงุณุชูุณุงุฎ ุงููุดุฑูุน**
```bash
git clone <repository-url>
cd 3ayadty-backend
```

2. **ุชุซุจูุช ุงูุชุจุนูุงุช**
```bash
npm install
```

3. **ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ**
```bash
cp .env.example .env
```

4. **ุชุญุฑูุฑ ููู .env ูุฅุถุงูุฉ ุงูุจูุงูุงุช ุงููุทููุจุฉ**
```env
# Server Configuration
PORT=5000
NODE_ENV=development

# Database Configuration
MONGODB_URI=mongodb://localhost:27017/3ayadty

# JWT Configuration
JWT_SECRET=your_super_secret_jwt_key_here
JWT_EXPIRES_IN=7d

# Other configurations...
```

5. **ุชุดุบูู ุงูุชุทุจูู**
```bash
# ููุชุทููุฑ
npm run dev

# ููุฅูุชุงุฌ
npm start
```

## ๐ API Documentation

### ุงูู Endpoints ุงูุฃุณุงุณูุฉ

#### ๐ ุงููุตุงุฏูุฉ (`/api/auth`)

| Method | Endpoint | ุงููุตู |
|--------|----------|--------|
| POST | `/register` | ุชุณุฌูู ูุฑูุถ ุฌุฏูุฏ |
| POST | `/login` | ุชุณุฌูู ุงูุฏุฎูู |
| POST | `/visitor/request-otp` | ุทูุจ ุฑูุฒ ุชุญูู ููุฒุงุฆุฑ |
| POST | `/visitor/verify-otp` | ุงูุชุญูู ูู ุฑูุฒ OTP |
| GET | `/profile` | ุฌูุจ ุงูููู ุงูุดุฎุตู |
| PUT | `/profile` | ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู |
| PUT | `/change-password` | ุชุบููุฑ ูููุฉ ุงููุฑูุฑ |
| POST | `/logout` | ุชุณุฌูู ุงูุฎุฑูุฌ |

#### ๐จโโ๏ธ ุงูุฃุทุจุงุก (`/api/doctors`)

| Method | Endpoint | ุงููุตู |
|--------|----------|--------|
| GET | `/` | ุฌูุจ ุฌููุน ุงูุฃุทุจุงุก |
| GET | `/search` | ุงูุจุญุซ ูู ุงูุฃุทุจุงุก |
| GET | `/nearby` | ุงูุฃุทุจุงุก ุงููุฑูุจูู |
| GET | `/specialization/:spec` | ุงูุฃุทุจุงุก ุญุณุจ ุงูุชุฎุตุต |
| POST | `/` | ุฅุถุงูุฉ ุทุจูุจ ุฌุฏูุฏ |
| GET | `/:id` | ุฌูุจ ุทุจูุจ ุจุงููุนุฑู |
| PUT | `/:id` | ุชุญุฏูุซ ุจูุงูุงุช ุงูุทุจูุจ |
| DELETE | `/:id` | ุญุฐู ุงูุทุจูุจ |

#### ๐ ุงูุนุงู (`/api/public`)

| Method | Endpoint | ุงููุตู |
|--------|----------|--------|
| GET | `/doctors` | ูุงุฆูุฉ ุงูุฃุทุจุงุก ุงูุนุงูุฉ |
| GET | `/doctor/:slug` | ููู ุงูุทุจูุจ ุงูุนุงู |
| GET | `/clinics` | ูุงุฆูุฉ ุงูุนูุงุฏุงุช |
| GET | `/specializations` | ุงูุชุฎุตุตุงุช ุงููุชุงุญุฉ |
| GET | `/cities` | ุงููุฏู ุงููุชุงุญุฉ |
| GET | `/search` | ุงูุจุญุซ ุงูุนุงู |
| GET | `/stats` | ุฅุญุตุงุฆูุงุช ุงูููุตุฉ |

### ุฃูุซูุฉ ุงูุทูุจุงุช

#### ุชุณุฌูู ูุฑูุถ ุฌุฏูุฏ
```bash
curl -X POST http://localhost:5000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "fullName": "ุฃุญูุฏ ูุญูุฏ ุนูู",
    "mobile": "0501234567",
    "email": "ahmed@example.com",
    "password": "123456",
    "gender": "male",
    "dateOfBirth": "1990-01-01",
    "emergencyContact": {
      "name": "ูุงุทูุฉ ุนูู",
      "relationship": "ุฒูุฌุฉ",
      "mobile": "0509876543"
    }
  }'
```

#### ุชุณุฌูู ุงูุฏุฎูู
```bash
curl -X POST http://localhost:5000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "mobile": "0501234567",
    "password": "123456"
  }'
```

#### ุฌูุจ ุงูุฃุทุจุงุก ูุน ุงูุชุตูุญ
```bash
curl "http://localhost:5000/api/doctors?page=1&limit=10&specialization=ุฃุทูุงู&city=ุงูุฑูุงุถ"
```

#### ุงูุจุญุซ ุนู ุงูุฃุทุจุงุก
```bash
curl "http://localhost:5000/api/doctors/search?q=ููุจ"
```

## ๐ ุงููุตุงุฏูุฉ ูุงูุชุฎููู

ูุณุชุฎุฏู API ูุธุงู JWT ูููุตุงุฏูุฉ. ูุฌุจ ุฅุฑุณุงู ุงูุฑูุฒ ูู ุงูู header:

```bash
Authorization: Bearer <your-jwt-token>
```

### ุงูุฃุฏูุงุฑ ุงููุชุงุญุฉ:
- **admin**: ูุฏูุฑ ุงููุธุงู
- **doctor**: ุทุจูุจ
- **reception**: ููุธู ุงุณุชูุจุงู
- **patient**: ูุฑูุถ
- **guest**: ุฒุงุฆุฑ (ุบูุฑ ูุณุฌู)

## ๐ ุฑูุน ุงููููุงุช

ูุฏุนู API ุฑูุน ุงููููุงุช ุงูุชุงููุฉ:
- **ุงูุตูุฑ**: JPEG, PNG, GIF, WebP
- **ุงููุณุชูุฏุงุช**: PDF, DOC, DOCX

### ูุฌูุฏุงุช ุงูุฑูุน:
- `uploads/profiles/` - ุงูุตูุฑ ุงูุดุฎุตูุฉ
- `uploads/clinics/` - ุตูุฑ ุงูุนูุงุฏุงุช
- `uploads/medical-records/` - ุงููููุงุช ุงูุทุจูุฉ
- `uploads/documents/` - ูุณุชูุฏุงุช ุนุงูุฉ

## ๐ ูุชุบูุฑุงุช ุงูุจูุฆุฉ

```env
# ุฅุนุฏุงุฏุงุช ุงูุฎุงุฏู
PORT=5000
NODE_ENV=development

# ูุงุนุฏุฉ ุงูุจูุงูุงุช
MONGODB_URI=mongodb://localhost:27017/3ayadty

# JWT
JWT_SECRET=your_super_secret_jwt_key
JWT_EXPIRES_IN=7d

# OTP
OTP_EXPIRES_IN=300000

# ุฑูุน ุงููููุงุช
MAX_FILE_SIZE=5242880
UPLOAD_PATH=uploads/

# Rate Limiting
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX=100

# CORS
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173
```

## ๐ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงููุฌููุนุงุช ุงูุฑุฆูุณูุฉ:
- **users** - ุงููุณุชุฎุฏููู ุงูุฃุณุงุณููู
- **doctors** - ูููุงุช ุงูุฃุทุจุงุก
- **patients** - ูููุงุช ุงููุฑุถู
- **visitors** - ุงูุฒูุงุฑ (ุบูุฑ ุงููุณุฌููู)
- **clinics** - ุงูุนูุงุฏุงุช
- **appointments** - ุงูููุงุนูุฏ
- **medicalrecords** - ุงูุณุฌูุงุช ุงูุทุจูุฉ
- **reviews** - ุงูุชููููุงุช
- **admins** - ุงููุฏูุฑูู

## ๐งช ุงูุงุฎุชุจุงุฑ

```bash
# ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช
npm test

# ุงุฎุชุจุงุฑุงุช ูุน ุชุบุทูุฉ ุงูููุฏ
npm run test:coverage
```

## ๐ ุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ

```bash
# ุชุดุบูู ุงูู seeder
npm run seed
```

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ:

1. **ุฎุทุฃ ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช**
   - ุชุฃูุฏ ูู ุชุดุบูู MongoDB
   - ุชุญูู ูู `MONGODB_URI` ูู `.env`

2. **ุฎุทุฃ ุฑูุน ุงููููุงุช**
   - ุชุฃูุฏ ูู ูุฌูุฏ ูุฌูุฏ `uploads/`
   - ุชุญูู ูู ุตูุงุญูุงุช ุงููุชุงุจุฉ

3. **ุฎุทุฃ JWT**
   - ุชุฃูุฏ ูู ูุฌูุฏ `JWT_SECRET` ูู `.env`
   - ุชุญูู ูู ุตุญุฉ ุงูุฑูุฒ ุงููุฑุณู

## ๐ ุงููุดุฑ

### ุนูู Heroku:
```bash
heroku create 3ayadty-backend
heroku config:set NODE_ENV=production
heroku config:set MONGODB_URI=<your-mongodb-atlas-uri>
heroku config:set JWT_SECRET=<your-jwt-secret>
git push heroku main
```

### ุนูู VPS:
```bash
# ุงุณุชุฎุฏู PM2 ูุฅุฏุงุฑุฉ ุงูุนูููุฉ
npm install -g pm2
pm2 start src/app.js --name "3ayadty-backend"
pm2 startup
pm2 save
```

## ๐ค ุงููุณุงููุฉ

1. Fork ุงููุดุฑูุน
2. ุฅูุดุงุก feature branch (`git checkout -b feature/amazing-feature`)
3. Commit ุงูุชุบููุฑุงุช (`git commit -m 'Add amazing feature'`)
4. Push ููู branch (`git push origin feature/amazing-feature`)
5. ูุชุญ Pull Request

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ูุฑุฎุต ุชุญุช ุฑุฎุตุฉ MIT - ุฑุงุฌุน ููู [LICENSE](LICENSE) ููุชูุงุตูู.

## ๐ ุงูุชูุงุตู

- **ุงูุฅูููู**: support@3ayadty.com
- **ุงููููุน**: https://3ayadty.com
- **ุงูุชูุซูู**: https://docs.3ayadty.com

---

**ูุฑุญุจุงู ุจู ูู ููุตุฉ ุนูุงุฏุงุชู ุงูุทุจูุฉ! ๐ฅ๐** 